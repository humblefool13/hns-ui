"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[468],{2612:(e,t,n)=>{n.d(t,{D:()=>p,ThemeProvider:()=>s});var a=n(5155),r=n(2115);let i=(0,r.createContext)(void 0);function s(e){let{children:t}=e,[n,s]=(0,r.useState)("dark"),[p,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{o(!0);let e=localStorage.getItem("theme");e&&s(e)},[]),(0,r.useEffect)(()=>{if(!p)return;let e=document.documentElement;e.classList.remove("dark","light"),"dark"===n?e.classList.add("dark"):e.classList.add("light"),localStorage.setItem("theme",n)},[n,p]),(0,a.jsx)(i.Provider,{value:{theme:n,toggleTheme:()=>{s("dark"===n?"light":"dark")},mounted:p},children:t})}function p(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},9121:(e,t,n)=>{n.d(t,{ContractProvider:()=>c,N:()=>d,k:()=>m});var a=n(5155),r=n(2115),i=n(3454),s=n(2143),p=n(8438),o=n(435);let y=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"InvalidTLD","type":"error"},{"inputs":[],"name":"NoDomain","type":"error"},{"inputs":[],"name":"NoFunds","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[],"name":"TLDExists","type":"error"},{"inputs":[],"name":"TransferFailed","type":"error"},{"inputs":[],"name":"UnAuth","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"recipient","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"FundsWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"tld","type":"string"},{"indexed":true,"internalType":"address","name":"tldContract","type":"address"}],"name":"TLDAdded","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"string","name":"domain","type":"string"}],"name":"addDomainToAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"tld","type":"string"}],"name":"addTLD","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"addressToDomains","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"mainDomain","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"registeredTLDs","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"string","name":"domain","type":"string"}],"name":"removeDomainFromAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"tld","type":"string"}],"name":"resolve","outputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"expiration","type":"uint256"},{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"reverseLookup","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"tld","type":"string"}],"name":"setMainDomain","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"svgLibrary","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"tldContracts","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"validNSAddress","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdrawFunds","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]'),u=JSON.parse('[{"inputs":[{"internalType":"string","name":"_tld","type":"string"},{"internalType":"address","name":"_hnsManager","type":"address"},{"internalType":"address","name":"_svgLibrary","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"BadBatch","type":"error"},{"inputs":[],"name":"BadMgr","type":"error"},{"inputs":[],"name":"BadSVG","type":"error"},{"inputs":[],"name":"BadTLD","type":"error"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"DomainAlreadyRegistered","type":"error"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"DomainIsExpired","type":"error"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"DomainNotFound","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721IncorrectOwner","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721InsufficientApproval","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC721InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"ERC721InvalidOperator","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721InvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC721InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC721InvalidSender","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721NonexistentToken","type":"error"},{"inputs":[],"name":"HeapEmpty","type":"error"},{"inputs":[{"internalType":"uint256","name":"required","type":"uint256"},{"internalType":"uint256","name":"provided","type":"uint256"}],"name":"InsufficientPaymentAmount","type":"error"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"InvalidName","type":"error"},{"inputs":[],"name":"InvalidRegistrationPeriod","type":"error"},{"inputs":[],"name":"NoToken","type":"error"},{"inputs":[],"name":"NotInHeap","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[],"name":"TransferFailed","type":"error"},{"inputs":[],"name":"Unauthorized","type":"error"},{"inputs":[],"name":"ZeroAddr","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_fromTokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_toTokenId","type":"uint256"}],"name":"BatchMetadataUpdate","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"}],"name":"DomainExpired","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"expiration","type":"uint256"}],"name":"DomainRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"newExpiration","type":"uint256"}],"name":"DomainRenewed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"DomainTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"cleaned","type":"uint256"}],"name":"ExpiredDomainsProcessed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"MetadataUpdate","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"_years","type":"uint256"}],"name":"_calculatePrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"allDomains","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"maxDomains","type":"uint256"}],"name":"cleanupExpiredDomains","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"domainToToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"domains","outputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint96","name":"renewalCount","type":"uint96"},{"internalType":"uint256","name":"expiration","type":"uint256"},{"internalType":"uint256","name":"registrationDate","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllDomains","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"getDomainExpiration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"getDomainInfo","outputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"expiration","type":"uint256"},{"internalType":"uint256","name":"registrationDate","type":"uint256"},{"internalType":"uint256","name":"renewalCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"getDomainOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalDomainCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hnsManager","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"isDomainAvailable","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"yearsToRegister","type":"uint256"}],"name":"register","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"yearsToRenew","type":"uint256"}],"name":"renew","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"resolveDomain","outputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"expiration","type":"uint256"},{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"salePrice","type":"uint256"}],"name":"royaltyInfo","outputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"royaltyAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"svgLibrary","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"tld","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"tokenToDomain","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"to","type":"address"}],"name":"transferDomain","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),d="0xace59A5c58a03934a35D8F8dfa825c1038d226BD",l=(0,r.createContext)(void 0),m=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useContract must be used within a ContractProvider");return e},c=e=>{let{children:t}=e,[n,m]=(0,r.useState)(!0),[c,T]=(0,r.useState)(null),[g]=(0,r.useState)(new Map),{address:f,isConnected:w}=(0,p.F)(),{data:v}=(0,o.d0)(),b=(0,r.useMemo)(()=>v?(0,i.PF)({address:d,abi:y,client:v}):null,[v]),h=e=>g.has(e.toLowerCase())?g.get(e):null,M=async()=>{try{if(!b)throw Error("HNS Manager contract not initialized");let e=[],t=0;for(;;)try{let n=await b.read.registeredTLDs([BigInt(t)]);if(n&&""!==n){e.push(n);let a=await b.read.tldContracts([n]);g.has(n)||g.set(n,(0,i.PF)({address:a,abi:u,client:v})),t++}else break}catch(e){break}return e}catch(e){throw console.error("Error getting registered TLDs:",e),e}},x=async()=>{var e;let t=await fetch("/api/hns/tlds",{cache:"no-store"});if(!t.ok)throw Error("Failed to fetch TLDs");return null!=(e=(await t.json()).tlds)?e:[]},I=async(e,t)=>{let n=await fetch("/api/hns/resolve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,tld:t})});if(!n.ok)return null;let a=await n.json();return{owner:a.owner,expiration:BigInt(a.expiration),nftAddress:a.nftAddress,tokenId:BigInt(a.tokenId)}},k=async(e,t)=>{if(!b)throw Error("HNS Manager contract not initialized");try{let n=await b.read.resolve([e.toLowerCase(),t.toLowerCase()]);return{owner:n[0],expiration:n[1],nftAddress:n[2],tokenId:n[3]}}catch(e){return console.error("Error resolving domain:",e),null}},E=async e=>{if(!b)throw Error("HNS Manager contract not initialized");try{return await b.read.reverseLookup([e])}catch(e){throw console.error("Error in reverse lookup:",e),e}},D=async e=>{if(!b)throw Error("HNS Manager contract not initialized");try{let t=[],n=0;for(;;)try{let a=await b.read.addressToDomains([e,BigInt(n)]);if(a&&""!==a)t.push(a),n++;else break}catch(e){break}return t}catch(e){throw console.error("Error getting address domains:",e),e}},C=async e=>{if(!b)throw Error("HNS Manager contract not initialized");let t="";try{if((t=await b.read.mainDomain([e]))&&""!==t&&t.length>0)return t;return""}catch(e){if("ContractFunctionExecutionError"!==e.name)throw e;return""}},A=async e=>{if(!b)throw Error("HNS Manager contract not initialized");try{let t=await b.write.setMainDomain(e.split("."));return console.log(t),t}catch(e){throw console.error("Error setting main domain:",e),e}},N=async(e,t,n)=>{try{let a=h(t);if(!a)throw Error("Name service contract not initialized for "+t);let r=L(e,n);return await a.write.register([e,BigInt(n)],{value:(0,s.g)(r.toString()),gas:BigInt(0x49503fe)})}catch(e){throw console.error("Error registering domain:",e),e}},S=async(e,t,n)=>{try{let a=h(t);if(!a)throw Error("Name service contract not initialized for "+t);let r=L(e,n);return await a.write.renew([e,BigInt(n)],{value:(0,s.g)(r.toString()),gas:BigInt(0x5c630fe)})}catch(e){throw console.error("Error renewing domain:",e),e}},F=async(e,t,n)=>{try{let a=h(t);if(!a)throw Error("Name service contract not initialized for "+t);return await a.write.transferDomain([e,n],{gas:BigInt(1405e3)})}catch(e){throw console.error("Error transferring domain:",e),e}},L=(e,t)=>{try{return 3===e.length?.012*t:4===e.length?.01*t:5===e.length?.008*t:6===e.length?.006*t:.004*t}catch(e){throw console.error("Error getting domain price:",e),e}},O=async(e,t)=>{try{let n=h(t);if(!n)throw Error("Name service contract not initialized for "+t);return await n.read.getDomainExpiration([e])}catch(e){throw console.error("Error getting domain expiration:",e),e}};return(0,r.useEffect)(()=>{let e=async()=>{try{m(!0),T(null),b&&await M(),m(!1)}catch(e){console.error("Error initializing contracts:",e),T(e instanceof Error?e.message:"Failed to initialize contracts"),m(!1)}};b&&e()},[b]),(0,a.jsx)(l.Provider,{value:{hnsManagerContract:b,nameServiceContracts:g,isLoading:n,error:c,getRegisteredTLDs:M,getRegisteredTLDsRPC:x,resolveDomain:k,resolveDomainRPC:I,reverseLookup:E,getAddressDomains:D,getMainDomain:C,setMainDomain:A,registerDomain:N,renewDomain:S,transferDomain:F,getDomainPrice:L,getDomainExpiration:O,getNameServiceContract:h,isConnected:w,address:f},children:t})}}}]);